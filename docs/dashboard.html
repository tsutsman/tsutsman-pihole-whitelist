<!DOCTYPE html>
<html lang="uk">
<head>
  <meta charset="utf-8">
  <title>Моніторинг whitelist</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="preconnect" href="https://cdn.jsdelivr.net">
  <style>
    body { font-family: "Inter", system-ui, -apple-system, sans-serif; margin: 2rem; background: #f8fafc; color: #0f172a; }
    h1 { margin-bottom: 1rem; }
    section { background: white; border-radius: 16px; padding: 1.5rem; box-shadow: 0 8px 24px rgba(15, 23, 42, 0.08); margin-bottom: 2rem; }
    table { width: 100%; border-collapse: collapse; margin-top: 1rem; }
    th, td { padding: 0.6rem 0.8rem; border-bottom: 1px solid #e2e8f0; text-align: left; }
    th { background: #f1f5f9; text-transform: uppercase; letter-spacing: 0.04em; font-size: 0.75rem; color: #475569; }
    td.num { text-align: right; font-variant-numeric: tabular-nums; }
    .grid { display: grid; gap: 1rem; grid-template-columns: repeat(auto-fit, minmax(180px, 1fr)); margin-top: 1rem; }
    .metric { padding: 1rem; border-radius: 12px; background: linear-gradient(135deg, #2563eb0d, #38bdf80d); border: 1px solid #e2e8f0; }
    .metric span { display: block; font-size: 0.85rem; color: #475569; margin-bottom: 0.4rem; }
    .metric strong { font-size: 1.6rem; font-variant-numeric: tabular-nums; }
    ul.log { max-height: 280px; overflow-y: auto; list-style: none; padding: 0; margin: 0; }
    ul.log li { padding: 0.4rem 0; border-bottom: 1px dashed #cbd5f5; font-family: "Fira Code", "JetBrains Mono", monospace; font-size: 0.85rem; }
    ul.log code { background: transparent; color: #1e293b; }
    footer { text-align: center; color: #64748b; margin-top: 3rem; font-size: 0.85rem; }
    @media (prefers-color-scheme: dark) {
      body { background: #0f172a; color: #e2e8f0; }
      section { background: #1e293b; box-shadow: none; }
      th { background: rgba(148, 163, 184, 0.15); color: #cbd5f5; }
      td { border-bottom-color: rgba(148, 163, 184, 0.2); }
      .metric { background: rgba(37, 99, 235, 0.1); border-color: rgba(148, 163, 184, 0.2); }
      ul.log li { border-bottom-color: rgba(148, 163, 184, 0.2); }
    }
  </style>
</head>
<body>
  <h1>Моніторинг білого списку Pi-hole</h1>
  <p>Оновлено: 2025-10-13 01:54:39</p>

  <section>
    <h2>Ключові показники</h2>
    <div class="grid">
      <div class="metric"><span>Активних доменів</span><strong>729</strong></div>
      <div class="metric"><span>Проблемні домени</span><strong>0</strong></div>
      <div class="metric"><span>Домени у deprecated</span><strong>0</strong></div>
      <div class="metric"><span>Джерела (доменів)</span><strong>334</strong></div>
    </div>
    <canvas id="historyChart" height="160" style="margin-top: 1.5rem;"></canvas>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script type="application/json" id="history-data">[
  {
    "timestamp": "2025-10-13T01:51:45+00:00",
    "active_domains": 729,
    "problematic_domains": 0,
    "deprecated_domains": 0,
    "sources_domains": 0,
    "sources_problematic": 0
  },
  {
    "timestamp": "2025-10-13T01:54:39+00:00",
    "active_domains": 729,
    "problematic_domains": 0,
    "deprecated_domains": 0,
    "sources_domains": 334,
    "sources_problematic": 0
  }
]</script>
    <script>
      const historyRaw = document.getElementById('history-data').textContent || '[]';
      let historyData = [];
      try { historyData = JSON.parse(historyRaw); } catch (error) { historyData = []; }
      const labels = historyData.map((item) => item.timestamp);
      const activeSeries = historyData.map((item) => item.active_domains);
      const problematicSeries = historyData.map((item) => item.problematic_domains);
      const canvas = document.getElementById('historyChart');
      const mediaQuery = window.matchMedia('(prefers-color-scheme: dark)');

      if (!labels.length) {
        const placeholder = document.createElement('p');
        placeholder.textContent = 'Недостатньо даних для побудови графіка.';
        placeholder.style.marginTop = '1rem';
        canvas.replaceWith(placeholder);
      } else {
        const ctx = canvas.getContext('2d');
        const axisColor = mediaQuery.matches ? '#cbd5f5' : '#475569';
        const legendColor = mediaQuery.matches ? '#e2e8f0' : '#1e293b';

        const chartInstance = new Chart(ctx, {
          type: 'line',
          data: {
            labels,
            datasets: [
              { label: 'Активні домени', data: activeSeries, borderColor: '#2563eb', backgroundColor: 'rgba(37,99,235,0.2)', tension: 0.25, fill: true },
              { label: 'Проблемні домени', data: problematicSeries, borderColor: '#ef4444', backgroundColor: 'rgba(239,68,68,0.2)', tension: 0.25, fill: true }
            ]
          },
          options: {
            responsive: true,
            maintainAspectRatio: false,
            scales: {
              x: { ticks: { color: axisColor } },
              y: { ticks: { color: axisColor }, beginAtZero: true }
            },
            plugins: {
              legend: { labels: { color: legendColor } }
            }
          }
        });

        const applyTheme = () => {
          const darkMode = mediaQuery.matches;
          const tickColor = darkMode ? '#cbd5f5' : '#475569';
          const labelColor = darkMode ? '#e2e8f0' : '#1e293b';
          chartInstance.options.scales.x.ticks.color = tickColor;
          chartInstance.options.scales.y.ticks.color = tickColor;
          chartInstance.options.plugins.legend.labels.color = labelColor;
          chartInstance.update();
        };

        if (mediaQuery.addEventListener) {
          mediaQuery.addEventListener('change', applyTheme);
        } else if (mediaQuery.addListener) {
          mediaQuery.addListener(applyTheme);
        }
        applyTheme();
      }
    </script>
  </section>

  <section>
    <h2>Категорії</h2>
    <table>
      <thead>
        <tr><th>Категорія</th><th>Активні</th><th>Проблемні</th><th>Частка недоступних</th><th>Остання перевірка</th></tr>
      </thead>
      <tbody>
        
<tr><td>ai_services.txt</td><td class="num">21</td><td class="num">0</td><td class="num">0.0%</td><td>2025-10-12 20:27:14</td></tr>
<tr><td>antivirus.txt</td><td class="num">20</td><td class="num">0</td><td class="num">0.0%</td><td>2025-10-12 20:27:14</td></tr>
<tr><td>apple.txt</td><td class="num">109</td><td class="num">0</td><td class="num">0.0%</td><td>2025-10-12 20:27:14</td></tr>
<tr><td>base.txt</td><td class="num">10</td><td class="num">0</td><td class="num">0.0%</td><td>2025-10-12 20:27:14</td></tr>
<tr><td>certificates.txt</td><td class="num">4</td><td class="num">0</td><td class="num">0.0%</td><td>2025-10-12 20:27:14</td></tr>
<tr><td>cloud_storage.txt</td><td class="num">24</td><td class="num">0</td><td class="num">0.0%</td><td>2025-10-12 20:27:14</td></tr>
<tr><td>cloudflare_warp.txt</td><td class="num">19</td><td class="num">0</td><td class="num">0.0%</td><td>2025-10-12 20:27:14</td></tr>
<tr><td>creality_print.txt</td><td class="num">14</td><td class="num">0</td><td class="num">0.0%</td><td>2025-10-12 20:27:14</td></tr>
<tr><td>ecommerce.txt</td><td class="num">7</td><td class="num">0</td><td class="num">0.0%</td><td>2025-10-12 20:27:14</td></tr>
<tr><td>educational_resources.txt</td><td class="num">5</td><td class="num">0</td><td class="num">0.0%</td><td>2025-10-12 20:27:14</td></tr>
<tr><td>extended_services.txt</td><td class="num">212</td><td class="num">0</td><td class="num">0.0%</td><td>2025-10-12 20:27:14</td></tr>
<tr><td>gaming.txt</td><td class="num">31</td><td class="num">0</td><td class="num">0.0%</td><td>2025-10-12 20:27:14</td></tr>
<tr><td>google_services.txt</td><td class="num">30</td><td class="num">0</td><td class="num">0.0%</td><td>2025-10-12 20:27:14</td></tr>
<tr><td>international_banks.txt</td><td class="num">5</td><td class="num">0</td><td class="num">0.0%</td><td>2025-10-12 20:27:14</td></tr>
<tr><td>messengers.txt</td><td class="num">11</td><td class="num">0</td><td class="num">0.0%</td><td>2025-10-12 20:27:14</td></tr>
<tr><td>microsoft_onedrive.txt</td><td class="num">49</td><td class="num">0</td><td class="num">0.0%</td><td>2025-10-12 20:27:14</td></tr>
<tr><td>microsoft_updates.txt</td><td class="num">30</td><td class="num">0</td><td class="num">0.0%</td><td>2025-10-12 20:27:14</td></tr>
<tr><td>mozilla_push.txt</td><td class="num">1</td><td class="num">0</td><td class="num">0.0%</td><td>2025-10-12 20:27:14</td></tr>
<tr><td>news_media.txt</td><td class="num">5</td><td class="num">0</td><td class="num">0.0%</td><td>2025-10-12 20:27:14</td></tr>
<tr><td>ntp_servers.txt</td><td class="num">9</td><td class="num">0</td><td class="num">0.0%</td><td>2025-10-12 20:27:14</td></tr>
<tr><td>office_collaboration.txt</td><td class="num">6</td><td class="num">0</td><td class="num">0.0%</td><td>2025-10-12 20:27:14</td></tr>
<tr><td>smart_home_devices.txt</td><td class="num">16</td><td class="num">0</td><td class="num">0.0%</td><td>2025-10-12 20:27:14</td></tr>
<tr><td>social_networks.txt</td><td class="num">9</td><td class="num">0</td><td class="num">0.0%</td><td>2025-10-12 20:27:14</td></tr>
<tr><td>streaming_services.txt</td><td class="num">10</td><td class="num">0</td><td class="num">0.0%</td><td>2025-10-12 20:27:14</td></tr>
<tr><td>ukrainian_services.txt</td><td class="num">59</td><td class="num">0</td><td class="num">0.0%</td><td>2025-10-12 20:27:14</td></tr>
<tr><td>web_resources.txt</td><td class="num">13</td><td class="num">0</td><td class="num">0.0%</td><td>2025-10-12 20:27:14</td></tr>
      </tbody>
    </table>
  </section>

  <section>
    <h2>Зовнішні джерела</h2>
    <table>
      <thead>
        <tr><th>Назва</th><th>URL</th><th>Доменів</th><th>Проблемні</th><th>Частка недоступних</th><th>Останнє оновлення</th></tr>
      </thead>
      <tbody>
        
<tr><td>anudeep_whitelist</td><td><a href="https://raw.githubusercontent.com/anudeepND/whitelist/master/domains/whitelist.txt" target="_blank" rel="noopener">https://raw.githubusercontent.com/anudeepND/whitelist/master/domains/whitelist.txt</a></td><td class="num">191</td><td class="num">0</td><td class="num">0.0%</td><td>2025-10-13 01:52:02</td></tr>
<tr><td>anudeep_optional</td><td><a href="https://raw.githubusercontent.com/anudeepND/whitelist/master/domains/optional-list.txt" target="_blank" rel="noopener">https://raw.githubusercontent.com/anudeepND/whitelist/master/domains/optional-list.txt</a></td><td class="num">143</td><td class="num">0</td><td class="num">0.0%</td><td>2025-10-13 01:52:03</td></tr>
      </tbody>
    </table>
  </section>

  <section>
    <h2>Журнал видалень</h2>
    <ul class="log">
      <li>Журнал порожній або недоступний.</li>
    </ul>
  </section>

  <footer>
    Звіт сформовано скриптом generate_stats_report.sh • 2025-10-13 01:54:39 UTC
  </footer>
</body>
</html>
